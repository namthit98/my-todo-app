document.addEventListener("DOMContentLoaded",function(){class a{constructor(o,p){this.id=o,this.name=p,this.isCompleted=!1,this.createdDate=Date.now()}}const c=document.querySelector(".btn"),d=document.querySelector(".main__input"),f=document.querySelector(".list-todo"),g=new class{getStorage(){return null===localStorage.getItem("Todos")?[]:JSON.parse(localStorage.getItem("Todos"))}saveToStorage(){localStorage.setItem("Todos",JSON.stringify(h))}},h=g.getStorage(),i=()=>{f.innerHTML="",h.forEach(o=>j(o))},j=o=>{const p=document.createElement("li");p.className=!1===o.isCompleted?"item":"item item--disabled",p.setAttribute("data-id",o.id);const q=document.createElement("span");q.className="item__name",q.textContent=o.name,p.appendChild(q);const r=document.createElement("span");r.className="item__remove",r.textContent="X",p.appendChild(r),f.insertBefore(p,f.childNodes[0])},k=()=>{const o=0===h.length?0:h[h.length-1].id+1,p=d.value,q=new a(o,p);h.push(q),g.saveToStorage(),i(),m()},l=o=>{if(o.target.classList.contains("item")){const p=parseInt(o.target.dataset.id),q=h.find(r=>r.id===p);q.isCompleted=!q.isCompleted,g.saveToStorage(),i()}else if(o.target.classList.contains("item__remove")){const p=parseInt(o.target.parentElement.dataset.id),q=h.findIndex(r=>r.id===p);h.splice(q,1),console.log(h),g.saveToStorage(),i()}},m=()=>{d.value="",d.focus()};(()=>{c.addEventListener("click",k),f.addEventListener("click",l),document.addEventListener("keypress",o=>{(13===o.keyCode||13===o.which)&&k()}),i(),m()})()});